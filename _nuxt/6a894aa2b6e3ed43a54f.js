(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{186:function(t,e){},196:function(t,e,n){"use strict";var r=n(180),c=n.n(r),o={data:function(){return{}},props:{},methods:{createAloRoom:function(){alert("Aloしてくれるユーザーを待ちます"),this.$parent.socket||(this.$parent.socket=c()("localhost:3001"));this.$parent.socket.emit("waiting-talk","SOMEHOW"),window.location.href="./calling?room_id=SOMEHOW"}}},l=n(21),component=Object(l.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"card",on:{click:this.createAloRoom}},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"content yo-button has-text-centered"}),this._v(" "),this._t("default")],2)])}),[],!1,null,null,null);e.a=component.exports},242:function(t,e,n){"use strict";n.r(e);n(17);var r=n(3),c=n(210),o=n.n(c),l=n(196),d=(n(180),{name:"index",data:function(){return{waitingUsers:[],socket:"",isLoading:!1}},components:{TalkingButton:l.a},mounted:function(){var t;console.log("mounted path: /calling"),this.$route.query.room_id||(window.location.href="/"),(t=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,c,l,d,m,f,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("js-local-stream"),n=document.getElementById("js-local-id"),c=document.getElementById("js-call-trigger"),l=document.getElementById("js-close-trigger"),d=document.getElementById("js-remote-stream"),m=document.getElementById("js-remote-id"),document.getElementById("js-meta"),document.querySelector("script[src*=skyway]"),t.next=10,navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).catch(console.error);case 10:return f=t.sent,e.muted=!0,e.srcObject=f,e.playsInline=!0,t.next=16,e.play().catch(console.error);case 16:v=window.peer=new o.a({key:"d8e43ecb-578b-414e-a161-2f00615b447e",debug:3}),c.addEventListener("click",(function(){if(v.open){var t=v.call(m.value,f);t.on("stream",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.srcObject=e,d.playsInline=!0,t.next=4,d.play().catch(console.error);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.once("close",(function(){d.srcObject.getTracks().forEach((function(track){return track.stop()})),d.srcObject=null})),l.addEventListener("click",(function(){return t.close(!0)}))}})),v.once("open",(function(t){return n.textContent=t})),v.on("call",(function(t){t.answer(f),t.on("stream",function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.srcObject=e,d.playsInline=!0,t.next=4,d.play().catch(console.error);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.once("close",(function(){d.srcObject.getTracks().forEach((function(track){return track.stop()})),d.srcObject=null})),l.addEventListener("click",(function(){return t.close(!0)}))})),v.on("error",console.error);case 21:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})()}}),m=n(21),component=Object(m.a)(d,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("div",{staticClass:"columns is-mobile is-centered"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"heading"},[t._v("P2P Media example")]),t._v(" "),n("p",{staticClass:"note"},[t._v("Enter remote peer ID to call.")]),t._v(" "),n("div",{staticClass:"p2p-media"},[n("div",{staticClass:"remote-stream"},[n("video",{attrs:{id:"js-remote-stream",controls:""}})]),t._v(" "),n("div",{staticClass:"local-stream"},[n("video",{attrs:{id:"js-local-stream",controls:""}}),t._v(" "),n("p",[t._v("\n            Your ID:\n            "),n("span",{attrs:{id:"js-local-id"}})]),t._v(" "),n("input",{attrs:{type:"text",placeholder:"Remote Peer ID",id:"js-remote-id"}}),t._v(" "),n("button",{attrs:{id:"js-call-trigger"}},[t._v("Call")]),t._v(" "),n("button",{attrs:{id:"js-close-trigger"}},[t._v("Close")])])]),t._v(" "),n("p",{staticClass:"meta",attrs:{id:"js-meta"}})])])])}],!1,null,null,null);e.default=component.exports}}]);